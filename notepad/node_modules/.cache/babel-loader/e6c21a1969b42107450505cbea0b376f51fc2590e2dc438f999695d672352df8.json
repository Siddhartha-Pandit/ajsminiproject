{"ast":null,"code":"var _jsxFileName = \"E:\\\\ajsminiproject\\\\notepad\\\\src\\\\components\\\\EditorNew.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport useFetch from \"../useFetch\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst EditorNew = () => {\n  _s();\n  const [data, setData] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [isPending, setIsPending] = useState(false);\n  const [activeButtons, setActiveButtons] = useState([]);\n  const [Loading, setIsLoading] = useState(false);\n  const [content, setContent] = useState(\"\");\n  const [fontNameOptions, setFontNameOptions] = useState([]);\n  const [fontSizeOptions, setFontSizeOptions] = useState([]);\n  const apiUrl = process.env.REACT_APP_API_URL;\n  const navigate = useNavigate();\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    const fetchNote = async () => {\n      try {\n        const response = await fetch(`http://127.0.0.1:8000/notes/${id}/`);\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch note\");\n        }\n        const data = await response.json();\n        setData(data);\n        setContent(data.content);\n        setIsLoading(false);\n      } catch (error) {\n        console.error(\"Error fetching note:\", error);\n        setIsLoading(false);\n      }\n    };\n    fetchNote();\n  }, [id]);\n  const title = useSelector(state => state.newdata);\n  useEffect(() => {\n    const fontList = [\"Arial\", \"Verdana\", \"Times New Roman\", \"Garamond\", \"Georgia\", \"Courier New\", \"cursive\"];\n    const fontNameOptions = fontList.map((value, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n      value: value,\n      children: value\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this));\n    console.log(\"this is the data\", data);\n    const sizeOptions = [];\n    for (let i = 1; i <= 7; i++) {\n      sizeOptions.push( /*#__PURE__*/_jsxDEV(\"option\", {\n        value: i,\n        children: i\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this));\n    }\n    setFontSizeOptions(sizeOptions);\n    setFontNameOptions(fontNameOptions);\n  }, []);\n  const handleSave = e => {\n    e.preventDefault();\n    const blog = {\n      title: \"updated title\",\n      content: content\n    };\n    console.log(blog);\n    setIsPending(true);\n    fetch(`http://127.0.0.1:8000/notes/${id}/`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(blog)\n    }).then(response => {\n      if (!response.ok) {\n        throw new Error(\"Failed to update data\");\n      }\n      navigate(\"/\");\n    }).catch(error => {\n      console.error(\"Error updating data:\", error);\n      setIsPending(false);\n    });\n  };\n  const handleButtonClick = (command, needsRemoval) => {\n    console.log(\"Executing command:\", command);\n    document.execCommand(command, false, null);\n    if (needsRemoval) {\n      const alreadyActive = activeButtons.includes(command);\n      setActiveButtons(alreadyActive ? [] : [command]);\n    } else {\n      setActiveButtons(prevButtons => prevButtons.includes(command) ? prevButtons.filter(button => button !== command) : [...prevButtons, command]);\n    }\n  };\n  const handlesetItem = e => {\n    const selection = window.getSelection();\n    const range = selection.getRangeAt(0);\n    const start = range.startOffset; // Store the start offset of the selection\n\n    // Update the content state\n    setContent(e.target.innerHTML);\n\n    // Restore the cursor position after updating the content\n    const updatedRange = document.createRange();\n    updatedRange.setStart(range.startContainer, start);\n    updatedRange.collapse(true);\n    selection.removeAllRanges();\n    selection.addRange(updatedRange);\n  };\n  const handleAdvancedOptionChange = (command, value) => {\n    if (command === \"fontName\") {\n      document.execCommand(command, false, value);\n    } else if (command === \"fontSize\") {\n      document.execCommand(\"fontSize\", false, value);\n    } else {\n      document.execCommand(command, false, value);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: content && content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(EditorNew, \"qSiVPpj3A1OQf2M4epp1118NhRA=\", false, function () {\n  return [useNavigate, useParams, useSelector];\n});\n_c = EditorNew;\nexport default EditorNew;\nvar _c;\n$RefreshReg$(_c, \"EditorNew\");","map":{"version":3,"names":["useEffect","useState","useFetch","useNavigate","useParams","useSelector","jsxDEV","_jsxDEV","Fragment","_Fragment","EditorNew","_s","data","setData","body","setBody","isPending","setIsPending","activeButtons","setActiveButtons","Loading","setIsLoading","content","setContent","fontNameOptions","setFontNameOptions","fontSizeOptions","setFontSizeOptions","apiUrl","process","env","REACT_APP_API_URL","navigate","id","fetchNote","response","fetch","ok","Error","json","error","console","title","state","newdata","fontList","map","value","index","children","fileName","_jsxFileName","lineNumber","columnNumber","log","sizeOptions","i","push","handleSave","e","preventDefault","blog","method","headers","JSON","stringify","then","catch","handleButtonClick","command","needsRemoval","document","execCommand","alreadyActive","includes","prevButtons","filter","button","handlesetItem","selection","window","getSelection","range","getRangeAt","start","startOffset","target","innerHTML","updatedRange","createRange","setStart","startContainer","collapse","removeAllRanges","addRange","handleAdvancedOptionChange","className","_c","$RefreshReg$"],"sources":["E:/ajsminiproject/notepad/src/components/EditorNew.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport useFetch from \"../useFetch\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nconst EditorNew = () => {\r\n  const [data, setData] = useState(\"\");\r\n  const [body, setBody] = useState(\"\");\r\n  const [isPending, setIsPending] = useState(false);\r\n  const [activeButtons, setActiveButtons] = useState([]);\r\n  const [Loading, setIsLoading] = useState(false);\r\n  const [content, setContent] = useState(\"\");\r\n\r\n  const [fontNameOptions, setFontNameOptions] = useState([]);\r\n  const [fontSizeOptions, setFontSizeOptions] = useState([]);\r\n\r\n  const apiUrl = process.env.REACT_APP_API_URL;\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n  useEffect(() => {\r\n    const fetchNote = async () => {\r\n      try {\r\n        const response = await fetch(`http://127.0.0.1:8000/notes/${id}/`);\r\n        if (!response.ok) {\r\n          throw new Error(\"Failed to fetch note\");\r\n        }\r\n        const data = await response.json();\r\n        setData(data);\r\n        setContent(data.content);\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Error fetching note:\", error);\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchNote();\r\n  }, [id]);\r\n  const title = useSelector((state) => state.newdata);\r\n  useEffect(() => {\r\n    const fontList = [\r\n      \"Arial\",\r\n      \"Verdana\",\r\n      \"Times New Roman\",\r\n      \"Garamond\",\r\n      \"Georgia\",\r\n      \"Courier New\",\r\n      \"cursive\",\r\n    ];\r\n    const fontNameOptions = fontList.map((value, index) => (\r\n      <option key={index} value={value}>\r\n        {value}\r\n      </option>\r\n    ));\r\n    console.log(\"this is the data\", data);\r\n\r\n    const sizeOptions = [];\r\n\r\n    for (let i = 1; i <= 7; i++) {\r\n      sizeOptions.push(\r\n        <option key={i} value={i}>\r\n          {i}\r\n        </option>\r\n      );\r\n    }\r\n\r\n    setFontSizeOptions(sizeOptions);\r\n    setFontNameOptions(fontNameOptions);\r\n  }, []);\r\n\r\n  const handleSave = (e) => {\r\n    e.preventDefault();\r\n\r\n    const blog = {\r\n      title: \"updated title\",\r\n      content: content,\r\n    };\r\n    console.log(blog);\r\n\r\n    setIsPending(true);\r\n    fetch(`http://127.0.0.1:8000/notes/${id}/`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(blog),\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(\"Failed to update data\");\r\n        }\r\n        navigate(\"/\");\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error updating data:\", error);\r\n        setIsPending(false);\r\n      });\r\n  };\r\n\r\n  const handleButtonClick = (command, needsRemoval) => {\r\n    console.log(\"Executing command:\", command);\r\n    document.execCommand(command, false, null);\r\n    if (needsRemoval) {\r\n      const alreadyActive = activeButtons.includes(command);\r\n      setActiveButtons(alreadyActive ? [] : [command]);\r\n    } else {\r\n      setActiveButtons((prevButtons) =>\r\n        prevButtons.includes(command)\r\n          ? prevButtons.filter((button) => button !== command)\r\n          : [...prevButtons, command]\r\n      );\r\n    }\r\n  };\r\n\r\n  const handlesetItem = (e) => {\r\n    const selection = window.getSelection();\r\n    const range = selection.getRangeAt(0);\r\n    const start = range.startOffset; // Store the start offset of the selection\r\n\r\n    // Update the content state\r\n    setContent(e.target.innerHTML);\r\n\r\n    // Restore the cursor position after updating the content\r\n    const updatedRange = document.createRange();\r\n    updatedRange.setStart(range.startContainer, start);\r\n    updatedRange.collapse(true);\r\n    selection.removeAllRanges();\r\n    selection.addRange(updatedRange);\r\n  };\r\n  const handleAdvancedOptionChange = (command, value) => {\r\n    if (command === \"fontName\") {\r\n      document.execCommand(command, false, value);\r\n    } else if (command === \"fontSize\") {\r\n      document.execCommand(\"fontSize\", false, value);\r\n    } else {\r\n      document.execCommand(command, false, value);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <div className=\"container\">{content && content}</div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditorNew;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}